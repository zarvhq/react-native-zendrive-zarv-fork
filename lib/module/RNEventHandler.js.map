{"version":3,"names":["DeviceEventEmitter","NativeEventEmitter","NativeModules","Platform","ZendriveCallbackEventKind","callbackEventMappings","ON_DRIVE_START","ON_DRIVE_RESUME","ON_DRIVE_END","ON_DRIVE_ANALYZED","ON_ACCIDENT","ON_POTENTIAL_ACCIDENT","ON_SETTINGS_CHANGED","ON_LOCATION_APPROVED","ON_LOCATION_DENIED","ON_ACTIVITY_APPROVED","ON_ACTIVITY_DENIED","ON_BOOT_COMPLETED","ON_MY_PACKAGE_REPLACED","RNEventHandler","emitter","OS","ZendriveEventEmitter","listeners","Map","callbackHandler","hasOwnProperty","eventName","sdkEvent","listener","event","kind","set","addListener","get","removeAllListeners","delete"],"sources":["RNEventHandler.ts"],"sourcesContent":["import {\n  DeviceEventEmitter,\n  NativeEventEmitter,\n  NativeModules,\n  Platform,\n} from 'react-native';\nimport {\n  ZendriveCallbackEventKind,\n  ZendriveCallbackEventHandler,\n  ZendriveCallbackEvent,\n} from './sdk/Events';\ntype nativeEventName =\n  | 'com.zendrive.onDriveStart'\n  | 'com.zendrive.onDriveResume'\n  | 'com.zendrive.onDriveEnd'\n  | 'com.zendrive.onDriveAnalyzed'\n  | 'com.zendrive.onAccident'\n  | 'com.zendrive.onPotentialAccident'\n  | 'com.zendrive.onSettingsChanged'\n  | 'com.zendrive.onLocationApproved'\n  | 'com.zendrive.onLocationDenied'\n  | 'com.zendrive.onActivityApproved'\n  | 'com.zendrive.onActivityDenied'\n  | 'com.zendrive.onBootCompleted'\n  | 'com.zendrive.onMyPackageReplaced';\n\nconst callbackEventMappings: Record<\n  nativeEventName,\n  ZendriveCallbackEventKind\n> = {\n  'com.zendrive.onDriveStart': ZendriveCallbackEventKind.ON_DRIVE_START,\n  'com.zendrive.onDriveResume': ZendriveCallbackEventKind.ON_DRIVE_RESUME,\n  'com.zendrive.onDriveEnd': ZendriveCallbackEventKind.ON_DRIVE_END,\n  'com.zendrive.onDriveAnalyzed': ZendriveCallbackEventKind.ON_DRIVE_ANALYZED,\n  'com.zendrive.onAccident': ZendriveCallbackEventKind.ON_ACCIDENT,\n  'com.zendrive.onPotentialAccident':\n    ZendriveCallbackEventKind.ON_POTENTIAL_ACCIDENT,\n  'com.zendrive.onSettingsChanged':\n    ZendriveCallbackEventKind.ON_SETTINGS_CHANGED,\n  'com.zendrive.onLocationApproved':\n    ZendriveCallbackEventKind.ON_LOCATION_APPROVED,\n  'com.zendrive.onLocationDenied': ZendriveCallbackEventKind.ON_LOCATION_DENIED,\n  'com.zendrive.onActivityApproved':\n    ZendriveCallbackEventKind.ON_ACTIVITY_APPROVED,\n  'com.zendrive.onActivityDenied': ZendriveCallbackEventKind.ON_ACTIVITY_DENIED,\n  'com.zendrive.onBootCompleted': ZendriveCallbackEventKind.ON_BOOT_COMPLETED,\n  'com.zendrive.onMyPackageReplaced':\n    ZendriveCallbackEventKind.ON_MY_PACKAGE_REPLACED,\n};\ntype nativeListener = (event: any) => void;\nexport default class RNEventHandler {\n  emitter =\n    Platform.OS === 'ios'\n      ? new NativeEventEmitter(NativeModules.ZendriveEventEmitter)\n      : DeviceEventEmitter;\n  listeners: Map<nativeEventName, nativeListener> = new Map();\n\n  register(callbackHandler: ZendriveCallbackEventHandler) {\n    for (const eventName in callbackEventMappings) {\n      if (callbackEventMappings.hasOwnProperty(eventName)) {\n        const sdkEvent = callbackEventMappings[eventName as nativeEventName];\n        const listener = (event: any) => {\n          callbackHandler({\n            kind: sdkEvent,\n            event,\n          } as ZendriveCallbackEvent);\n        };\n        this.listeners.set(eventName as nativeEventName, listener);\n        this.emitter.addListener(eventName, listener);\n      }\n    }\n  }\n\n  unregister() {\n    for (const eventName in callbackEventMappings) {\n      if (callbackEventMappings.hasOwnProperty(eventName)) {\n        const listener = this.listeners.get(eventName as nativeEventName);\n        if (listener) {\n          this.emitter.removeAllListeners(eventName);\n        }\n        this.listeners.delete(eventName as nativeEventName);\n      }\n    }\n  }\n}\n"],"mappings":"gIAAA,OACEA,kBAAkB,CAClBC,kBAAkB,CAClBC,aAAa,CACbC,QAAQ,KACH,cAAc,CACrB,OACEC,yBAAyB,KAGpB,cAAc,CAgBrB,GAAMC,sBAGL,CAAG,CACF,2BAA2B,CAAED,yBAAyB,CAACE,cAAc,CACrE,4BAA4B,CAAEF,yBAAyB,CAACG,eAAe,CACvE,yBAAyB,CAAEH,yBAAyB,CAACI,YAAY,CACjE,8BAA8B,CAAEJ,yBAAyB,CAACK,iBAAiB,CAC3E,yBAAyB,CAAEL,yBAAyB,CAACM,WAAW,CAChE,kCAAkC,CAChCN,yBAAyB,CAACO,qBAAqB,CACjD,gCAAgC,CAC9BP,yBAAyB,CAACQ,mBAAmB,CAC/C,iCAAiC,CAC/BR,yBAAyB,CAACS,oBAAoB,CAChD,+BAA+B,CAAET,yBAAyB,CAACU,kBAAkB,CAC7E,iCAAiC,CAC/BV,yBAAyB,CAACW,oBAAoB,CAChD,+BAA+B,CAAEX,yBAAyB,CAACY,kBAAkB,CAC7E,8BAA8B,CAAEZ,yBAAyB,CAACa,iBAAiB,CAC3E,kCAAkC,CAChCb,yBAAyB,CAACc,sBAC9B,CAAC,CAAC,GAEmBC,eAAc,gFACjCC,OAAO,CACLjB,QAAQ,CAACkB,EAAE,GAAK,KAAK,CACjB,GAAIpB,mBAAkB,CAACC,aAAa,CAACoB,oBAAoB,CAAC,CAC1DtB,kBAAkB,MACxBuB,SAAS,CAAyC,GAAIC,IAAG,EAAE,qDAE3D,kBAASC,eAA6C,CAAE,0CACP,CAC7C,GAAIpB,qBAAqB,CAACqB,cAAc,CAACC,SAAS,CAAC,CAAE,CACnD,GAAMC,SAAQ,CAAGvB,qBAAqB,CAACsB,SAAS,CAAoB,CACpE,GAAME,SAAQ,CAAG,QAAXA,SAAQ,CAAIC,KAAU,CAAK,CAC/BL,eAAe,CAAC,CACdM,IAAI,CAAEH,QAAQ,CACdE,KAAK,CAALA,KACF,CAAC,CAA0B,CAC7B,CAAC,CACD,KAAI,CAACP,SAAS,CAACS,GAAG,CAACL,SAAS,CAAqBE,QAAQ,CAAC,CAC1D,KAAI,CAACT,OAAO,CAACa,WAAW,CAACN,SAAS,CAAEE,QAAQ,CAAC,CAC/C,CACF,CAAC,CAZD,IAAK,GAAMF,UAAS,GAAItB,sBAAqB,WAa/C,CAAC,0BAED,qBAAa,CACX,IAAK,GAAMsB,UAAS,GAAItB,sBAAqB,CAAE,CAC7C,GAAIA,qBAAqB,CAACqB,cAAc,CAACC,SAAS,CAAC,CAAE,CACnD,GAAME,SAAQ,CAAG,IAAI,CAACN,SAAS,CAACW,GAAG,CAACP,SAAS,CAAoB,CACjE,GAAIE,QAAQ,CAAE,CACZ,IAAI,CAACT,OAAO,CAACe,kBAAkB,CAACR,SAAS,CAAC,CAC5C,CACA,IAAI,CAACJ,SAAS,CAACa,MAAM,CAACT,SAAS,CAAoB,CACrD,CACF,CACF,CAAC,qCAjCkBR,cAAc"}