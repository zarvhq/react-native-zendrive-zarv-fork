{"version":3,"names":["callbackEventMappings","ZendriveCallbackEventKind","ON_DRIVE_START","ON_DRIVE_RESUME","ON_DRIVE_END","ON_DRIVE_ANALYZED","ON_ACCIDENT","ON_POTENTIAL_ACCIDENT","ON_SETTINGS_CHANGED","ON_LOCATION_APPROVED","ON_LOCATION_DENIED","ON_ACTIVITY_APPROVED","ON_ACTIVITY_DENIED","ON_BOOT_COMPLETED","ON_MY_PACKAGE_REPLACED","RNEventHandler","emitter","Platform","OS","NativeEventEmitter","NativeModules","ZendriveEventEmitter","DeviceEventEmitter","listeners","Map","callbackHandler","hasOwnProperty","eventName","sdkEvent","listener","event","kind","set","addListener","get","removeAllListeners","delete"],"sources":["RNEventHandler.ts"],"sourcesContent":["import {\n  DeviceEventEmitter,\n  NativeEventEmitter,\n  NativeModules,\n  Platform,\n} from 'react-native';\nimport {\n  ZendriveCallbackEventKind,\n  ZendriveCallbackEventHandler,\n  ZendriveCallbackEvent,\n} from './sdk/Events';\ntype nativeEventName =\n  | 'com.zendrive.onDriveStart'\n  | 'com.zendrive.onDriveResume'\n  | 'com.zendrive.onDriveEnd'\n  | 'com.zendrive.onDriveAnalyzed'\n  | 'com.zendrive.onAccident'\n  | 'com.zendrive.onPotentialAccident'\n  | 'com.zendrive.onSettingsChanged'\n  | 'com.zendrive.onLocationApproved'\n  | 'com.zendrive.onLocationDenied'\n  | 'com.zendrive.onActivityApproved'\n  | 'com.zendrive.onActivityDenied'\n  | 'com.zendrive.onBootCompleted'\n  | 'com.zendrive.onMyPackageReplaced';\n\nconst callbackEventMappings: Record<\n  nativeEventName,\n  ZendriveCallbackEventKind\n> = {\n  'com.zendrive.onDriveStart': ZendriveCallbackEventKind.ON_DRIVE_START,\n  'com.zendrive.onDriveResume': ZendriveCallbackEventKind.ON_DRIVE_RESUME,\n  'com.zendrive.onDriveEnd': ZendriveCallbackEventKind.ON_DRIVE_END,\n  'com.zendrive.onDriveAnalyzed': ZendriveCallbackEventKind.ON_DRIVE_ANALYZED,\n  'com.zendrive.onAccident': ZendriveCallbackEventKind.ON_ACCIDENT,\n  'com.zendrive.onPotentialAccident':\n    ZendriveCallbackEventKind.ON_POTENTIAL_ACCIDENT,\n  'com.zendrive.onSettingsChanged':\n    ZendriveCallbackEventKind.ON_SETTINGS_CHANGED,\n  'com.zendrive.onLocationApproved':\n    ZendriveCallbackEventKind.ON_LOCATION_APPROVED,\n  'com.zendrive.onLocationDenied': ZendriveCallbackEventKind.ON_LOCATION_DENIED,\n  'com.zendrive.onActivityApproved':\n    ZendriveCallbackEventKind.ON_ACTIVITY_APPROVED,\n  'com.zendrive.onActivityDenied': ZendriveCallbackEventKind.ON_ACTIVITY_DENIED,\n  'com.zendrive.onBootCompleted': ZendriveCallbackEventKind.ON_BOOT_COMPLETED,\n  'com.zendrive.onMyPackageReplaced':\n    ZendriveCallbackEventKind.ON_MY_PACKAGE_REPLACED,\n};\ntype nativeListener = (event: any) => void;\nexport default class RNEventHandler {\n  emitter =\n    Platform.OS === 'ios'\n      ? new NativeEventEmitter(NativeModules.ZendriveEventEmitter)\n      : DeviceEventEmitter;\n  listeners: Map<nativeEventName, nativeListener> = new Map();\n\n  register(callbackHandler: ZendriveCallbackEventHandler) {\n    for (const eventName in callbackEventMappings) {\n      if (callbackEventMappings.hasOwnProperty(eventName)) {\n        const sdkEvent = callbackEventMappings[eventName as nativeEventName];\n        const listener = (event: any) => {\n          callbackHandler({\n            kind: sdkEvent,\n            event,\n          } as ZendriveCallbackEvent);\n        };\n        this.listeners.set(eventName as nativeEventName, listener);\n        this.emitter.addListener(eventName, listener);\n      }\n    }\n  }\n\n  unregister() {\n    for (const eventName in callbackEventMappings) {\n      if (callbackEventMappings.hasOwnProperty(eventName)) {\n        const listener = this.listeners.get(eventName as nativeEventName);\n        if (listener) {\n          this.emitter.removeAllListeners(eventName);\n        }\n        this.listeners.delete(eventName as nativeEventName);\n      }\n    }\n  }\n}\n"],"mappings":"yVAAA,yCAMA,oCAoBA,GAAMA,sBAGL,CAAG,CACF,2BAA2B,CAAEC,iCAAyB,CAACC,cAAc,CACrE,4BAA4B,CAAED,iCAAyB,CAACE,eAAe,CACvE,yBAAyB,CAAEF,iCAAyB,CAACG,YAAY,CACjE,8BAA8B,CAAEH,iCAAyB,CAACI,iBAAiB,CAC3E,yBAAyB,CAAEJ,iCAAyB,CAACK,WAAW,CAChE,kCAAkC,CAChCL,iCAAyB,CAACM,qBAAqB,CACjD,gCAAgC,CAC9BN,iCAAyB,CAACO,mBAAmB,CAC/C,iCAAiC,CAC/BP,iCAAyB,CAACQ,oBAAoB,CAChD,+BAA+B,CAAER,iCAAyB,CAACS,kBAAkB,CAC7E,iCAAiC,CAC/BT,iCAAyB,CAACU,oBAAoB,CAChD,+BAA+B,CAAEV,iCAAyB,CAACW,kBAAkB,CAC7E,8BAA8B,CAAEX,iCAAyB,CAACY,iBAAiB,CAC3E,kCAAkC,CAChCZ,iCAAyB,CAACa,sBAC9B,CAAC,CAAC,GAEmBC,eAAc,6FACjCC,OAAO,CACLC,qBAAQ,CAACC,EAAE,GAAK,KAAK,CACjB,GAAIC,gCAAkB,CAACC,0BAAa,CAACC,oBAAoB,CAAC,CAC1DC,+BAAkB,MACxBC,SAAS,CAAyC,GAAIC,IAAG,EAAE,kEAE3D,kBAASC,eAA6C,CAAE,0CACP,CAC7C,GAAIzB,qBAAqB,CAAC0B,cAAc,CAACC,SAAS,CAAC,CAAE,CACnD,GAAMC,SAAQ,CAAG5B,qBAAqB,CAAC2B,SAAS,CAAoB,CACpE,GAAME,SAAQ,CAAG,QAAXA,SAAQ,CAAIC,KAAU,CAAK,CAC/BL,eAAe,CAAC,CACdM,IAAI,CAAEH,QAAQ,CACdE,KAAK,CAALA,KACF,CAAC,CAA0B,CAC7B,CAAC,CACD,KAAI,CAACP,SAAS,CAACS,GAAG,CAACL,SAAS,CAAqBE,QAAQ,CAAC,CAC1D,KAAI,CAACb,OAAO,CAACiB,WAAW,CAACN,SAAS,CAAEE,QAAQ,CAAC,CAC/C,CACF,CAAC,CAZD,IAAK,GAAMF,UAAS,GAAI3B,sBAAqB,WAa/C,CAAC,0BAED,qBAAa,CACX,IAAK,GAAM2B,UAAS,GAAI3B,sBAAqB,CAAE,CAC7C,GAAIA,qBAAqB,CAAC0B,cAAc,CAACC,SAAS,CAAC,CAAE,CACnD,GAAME,SAAQ,CAAG,IAAI,CAACN,SAAS,CAACW,GAAG,CAACP,SAAS,CAAoB,CACjE,GAAIE,QAAQ,CAAE,CACZ,IAAI,CAACb,OAAO,CAACmB,kBAAkB,CAACR,SAAS,CAAC,CAC5C,CACA,IAAI,CAACJ,SAAS,CAACa,MAAM,CAACT,SAAS,CAAoB,CACrD,CACF,CACF,CAAC"}